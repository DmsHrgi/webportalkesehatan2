{% extends "base.html" %} {% block title %}Dashboard - Healthcare Portal{%
endblock %} {% block content %}
<div class="card">
	<!-- Header -->
	<div class="mb-8 pb-6 border-b border-gray-200">
		<div
			class="flex flex-col sm:flex-row justify-between items-start sm:items-center"
		>
			<div class="mb-4 sm:mb-0">
				<h2 class="text-3xl font-bold text-gray-900 flex items-center">
					<i class="fas fa-user-circle mr-3 text-purple-600"></i>
					Welcome back, {{ current_user.email.split('@')[0] }}!
				</h2>
				<p class="mt-2 text-lg text-gray-600">
					Here's your personalized health dashboard
				</p>
			</div>
			<div
				class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3"
			>
				<a
					href="{{ url_for('new_appointment') }}"
					class="btn-primary text-center inline-flex items-center justify-center"
				>
					<i class="fas fa-calendar-plus mr-2"></i> New Appointment
				</a>
				<a
					href="{{ url_for('upload_document') }}"
					class="bg-white border-2 border-purple-500 text-purple-600 px-4 py-2 rounded-lg font-semibold hover:bg-purple-50 transition-all inline-flex items-center justify-center"
				>
					<i class="fas fa-cloud-upload-alt mr-2"></i> Upload Documents
				</a>
			</div>
		</div>
	</div>

	<!-- Stats -->
	<div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
		<div class="stats-card">
			<div class="flex items-center">
				<div class="bg-white bg-opacity-20 rounded-lg p-3">
					<i class="fas fa-calendar-check text-white text-2xl"></i>
				</div>
				<div class="ml-4">
					<dt class="text-sm font-medium text-white opacity-90">
						Upcoming Appointments
					</dt>
					<dd class="text-3xl font-bold text-white">
						{{ upcoming_appointments|length }}
					</dd>
					<p class="text-xs text-white opacity-75 mt-1">Next 30 days</p>
				</div>
			</div>
		</div>

		<div class="stats-card">
			<div class="flex items-center">
				<div class="bg-white bg-opacity-20 rounded-lg p-3">
					<i class="fas fa-pills text-white text-2xl"></i>
				</div>
				<div class="ml-4">
					<dt class="text-sm font-medium text-white opacity-90">
						Active Medications
					</dt>
					<dd class="text-3xl font-bold text-white">
						{{ active_medications|length }}
					</dd>
					<p class="text-xs text-white opacity-75 mt-1">
						Current prescriptions
					</p>
				</div>
			</div>
		</div>

		<div class="stats-card">
			<div class="flex items-center">
				<div class="bg-white bg-opacity-20 rounded-lg p-3">
					<i class="fas fa-file-medical text-white text-2xl"></i>
				</div>
				<div class="ml-4">
					<dt class="text-sm font-medium text-white opacity-90">
						Recent Test Results
					</dt>
					<dd class="text-3xl font-bold text-white">
						{{ recent_test_results|length }}
					</dd>
					{% if new_test_results_count > 0 %}
					<p class="text-xs text-white opacity-75 mt-1">
						{{ new_test_results_count }} new results
					</p>
					{% else %}
					<p class="text-xs text-white opacity-75 mt-1">All reviewed</p>
					{% endif %}
				</div>
			</div>
		</div>
	</div>

	<!-- Main Content -->
	<div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
		<!-- Left Column -->
		<div class="lg:col-span-2 space-y-6">
			<!-- Health Summary -->
			<div class="card">
				<div class="mb-6">
					<h3 class="text-xl font-bold text-gray-900 flex items-center">
						<i class="fas fa-heartbeat mr-2 text-red-500"></i>
						Health Summary
					</h3>
					<p class="mt-1 text-gray-600">
						Your recent health metrics and statistics
					</p>
				</div>
				<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
					<div
						class="bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-lg"
					>
						<div class="flex items-center">
							<i class="fas fa-stethoscope text-blue-500 text-xl mr-3"></i>
							<div>
								<p class="text-sm font-medium text-gray-600">Last Checkup</p>
								<p class="text-lg font-semibold text-gray-900">
									{% if health_profile and health_profile.updated_at %} {{
									health_profile.updated_at.strftime('%B %d, %Y') }} {% else %}
									No previous checkup {% endif %}
								</p>
							</div>
						</div>
					</div>
					<div
						class="bg-gradient-to-r from-green-50 to-emerald-50 p-4 rounded-lg"
					>
						<div class="flex items-center">
							<i class="fas fa-tint text-green-500 text-xl mr-3"></i>
							<div>
								<p class="text-sm font-medium text-gray-600">Blood Pressure</p>
								<p class="text-lg font-semibold text-gray-900">120/80 mmHg</p>
								<p class="text-xs text-green-600">Normal</p>
							</div>
						</div>
					</div>
					<div
						class="bg-gradient-to-r from-purple-50 to-pink-50 p-4 rounded-lg"
					>
						<div class="flex items-center">
							<i class="fas fa-heartbeat text-purple-500 text-xl mr-3"></i>
							<div>
								<p class="text-sm font-medium text-gray-600">Heart Rate</p>
								<p class="text-lg font-semibold text-gray-900">72 bpm</p>
								<p class="text-xs text-purple-600">Resting</p>
							</div>
						</div>
					</div>
					<div
						class="bg-gradient-to-r from-yellow-50 to-orange-50 p-4 rounded-lg"
					>
						<div class="flex items-center">
							<i class="fas fa-weight text-yellow-500 text-xl mr-3"></i>
							<div>
								<p class="text-sm font-medium text-gray-600">BMI Status</p>
								<p class="text-lg font-semibold text-gray-900">22.5</p>
								<p class="text-xs text-yellow-600">Healthy</p>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Appointments -->
			<div class="card">
				<div class="flex justify-between items-center mb-6">
					<h3 class="text-xl font-bold text-gray-900 flex items-center">
						<i class="fas fa-calendar-alt mr-2 text-blue-500"></i>
						Upcoming Appointments
					</h3>
					<a
						href="{{ url_for('appointments') }}"
						class="text-purple-600 hover:text-purple-700 font-medium text-sm flex items-center"
					>
						View All <i class="fas fa-arrow-right ml-1"></i>
					</a>
				</div>
				<div class="space-y-3">
					{% for appointment in upcoming_appointments %}
					<div
						class="bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-lg border-l-4 border-blue-500 hover:shadow-md transition-shadow"
					>
						<div class="flex items-center justify-between">
							<div>
								<p class="font-semibold text-gray-900">
									{{ appointment.title }}
								</p>
								<div class="flex items-center mt-2 text-sm text-gray-600">
									<i class="far fa-calendar-alt mr-2"></i>
									{{ appointment.appointment_date.strftime('%B %d, %Y, %I:%M
									%p') }}
								</div>
								<div class="flex items-center mt-1 text-sm text-gray-600">
									<i class="fas fa-user-md mr-2"></i>
									{{ appointment.provider_name }}
								</div>
							</div>
							<span
								class="px-3 py-1 text-xs font-semibold rounded-full {% if appointment.status == 'Confirmed' %}bg-green-100 text-green-800 {% elif appointment.status == 'Scheduled' %}bg-yellow-100 text-yellow-800 {% else %}bg-gray-100 text-gray-800{% endif %}"
							>
								{{ appointment.status }}
							</span>
						</div>
					</div>
					{% else %}
					<div class="text-center py-8 bg-gray-50 rounded-lg">
						<i class="fas fa-calendar-times text-gray-400 text-4xl mb-3"></i>
						<p class="text-gray-600 font-medium">No upcoming appointments</p>
						<p class="text-gray-500 text-sm mt-1">
							Schedule your next appointment to stay on track
						</p>
					</div>
					{% endfor %}
				</div>
			</div>
		</div>

		<!-- Right Column -->
		<div class="space-y-6">
			<!-- Quick Actions -->
			<div class="card">
				<h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
					<i class="fas fa-bolt mr-2 text-yellow-500"></i>
					Quick Actions
				</h3>
				<div class="space-y-3">
					<a
						href="{{ url_for('prescription_refill') }}"
						class="quick-action-card block"
					>
						<div class="flex items-center">
							<i
								class="fas fa-file-prescription text-purple-500 text-xl mr-3"
							></i>
							<div>
								<p class="font-semibold text-gray-900">
									Request Prescription Refill
								</p>
								<p class="text-sm text-gray-600">Quick medication refill</p>
							</div>
						</div>
					</a>

					<a
						href="{{ url_for('new_message') }}"
						class="quick-action-card block"
					>
						<div class="flex items-center">
							<i class="fas fa-comment-medical text-blue-500 text-xl mr-3"></i>
							<div>
								<p class="font-semibold text-gray-900">Message Your Doctor</p>
								<p class="text-sm text-gray-600">Send a secure message</p>
							</div>
						</div>
					</a>

					<a
						href="{{ url_for('new_appointment') }}"
						class="quick-action-card block"
					>
						<div class="flex items-center">
							<i class="fas fa-calendar-plus text-green-500 text-xl mr-3"></i>
							<div>
								<p class="font-semibold text-gray-900">Schedule Appointment</p>
								<p class="text-sm text-gray-600">Book your next visit</p>
							</div>
						</div>
					</a>
				</div>
			</div>

			<!-- Health Tips -->
			<div
				class="bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl p-6 text-white"
			>
				<h3 class="text-xl font-bold mb-4 flex items-center">
					<i class="fas fa-lightbulb mr-2"></i>
					Health Tip of the Day
				</h3>
				<p class="text-white opacity-90 leading-relaxed">
					Stay hydrated! Drinking at least 8 glasses of water daily helps
					maintain body functions, improves skin health, and boosts energy
					levels. Keep a water bottle handy throughout the day.
				</p>
				<div class="mt-4">
					<a
						href="#"
						class="text-white font-semibold hover:opacity-80 transition-opacity flex items-center"
					>
						View more tips <i class="fas fa-arrow-right ml-2"></i>
					</a>
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock %}
